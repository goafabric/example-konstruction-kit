#!/bin/bash
source .values
COMMAND=$1
WORKSPACE="kind"

function terra() {
  terraform workspace or-create $WORKSPACE
  terraform $1 -auto-approve
}

function up() {
    terra apply
    (cd ingress_certs; terra apply)
}

function down() {
    (cd ingress_certs; terra destroy)
    terra destroy
}

if   [ "${COMMAND}" = "init" ]; then up;
elif [ "${COMMAND}" = "prune" ]; then down;

else echo Doing nothing !; fi
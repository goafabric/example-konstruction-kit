kind: CustomResourceDefinition
apiVersion: apiextensions.k8s.io/v1
metadata:
  name: apisixroutes.apisix.apache.org
  uid: ae1572dd-a874-4d7a-8c63-67920809cc4a
  resourceVersion: '321'
  generation: 1
  creationTimestamp: '2024-04-23T05:28:57Z'
  labels:
    apisix.apache.org/app: ingress-apisix
  managedFields:
    - manager: kube-apiserver
      operation: Update
      apiVersion: apiextensions.k8s.io/v1
      time: '2024-04-23T05:28:57Z'
      fieldsType: FieldsV1
      fieldsV1:
        f:status:
          f:acceptedNames:
            f:kind: {}
            f:listKind: {}
            f:plural: {}
            f:shortNames: {}
            f:singular: {}
          f:conditions:
            k:{"type":"Established"}:
              .: {}
              f:lastTransitionTime: {}
              f:message: {}
              f:reason: {}
              f:status: {}
              f:type: {}
            k:{"type":"NamesAccepted"}:
              .: {}
              f:lastTransitionTime: {}
              f:message: {}
              f:reason: {}
              f:status: {}
              f:type: {}
      subresource: status
    - manager: terraform-provider-helm_v2.13.1_x5
      operation: Update
      apiVersion: apiextensions.k8s.io/v1
      time: '2024-04-23T05:28:57Z'
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:labels:
            .: {}
            f:apisix.apache.org/app: {}
        f:spec:
          f:conversion:
            .: {}
            f:strategy: {}
          f:group: {}
          f:names:
            f:kind: {}
            f:listKind: {}
            f:plural: {}
            f:shortNames: {}
            f:singular: {}
          f:scope: {}
          f:versions: {}
spec:
  group: apisix.apache.org
  names:
    plural: apisixroutes
    singular: apisixroute
    shortNames:
      - ar
    kind: ApisixRoute
    listKind: ApisixRouteList
  scope: Namespaced
  versions:
    - name: v2beta3
      served: true
      storage: false
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              anyOf:
                - required:
                    - http
                - required:
                    - stream
              properties:
                http:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    required:
                      - name
                      - match
                      - backends
                    properties:
                      authentication:
                        type: object
                        required:
                          - enable
                        properties:
                          enable:
                            type: boolean
                          jwtAuth:
                            type: object
                            properties:
                              cookie:
                                type: string
                              header:
                                type: string
                              query:
                                type: string
                          keyAuth:
                            type: object
                            properties:
                              header:
                                type: string
                          type:
                            type: string
                            enum:
                              - basicAuth
                              - keyAuth
                              - jwtAuth
                              - wolfRBAC
                              - hmacAuth
                      backends:
                        type: array
                        minItems: 1
                        required:
                          - serviceName
                          - servicePort
                        items:
                          type: object
                          properties:
                            resolveGranularity:
                              type: string
                              enum:
                                - endpoint
                                - service
                            serviceName:
                              type: string
                              minLength: 1
                            servicePort:
                              anyOf:
                                - type: integer
                                - type: string
                              x-kubernetes-int-or-string: true
                            subset:
                              type: string
                            weight:
                              type: integer
                              minimum: 0
                      match:
                        type: object
                        required:
                          - paths
                        properties:
                          exprs:
                            type: array
                            minItems: 1
                            items:
                              type: object
                              oneOf:
                                - required:
                                    - subject
                                    - op
                                    - value
                                - required:
                                    - subject
                                    - op
                                    - set
                              properties:
                                op:
                                  type: string
                                  enum:
                                    - Equal
                                    - NotEqual
                                    - GreaterThan
                                    - LessThan
                                    - In
                                    - NotIn
                                    - RegexMatch
                                    - RegexNotMatch
                                    - RegexMatchCaseInsensitive
                                    - RegexNotMatchCaseInsensitive
                                set:
                                  type: array
                                  items:
                                    type: string
                                subject:
                                  type: object
                                  required:
                                    - scope
                                  properties:
                                    name:
                                      type: string
                                      minLength: 1
                                    scope:
                                      type: string
                                      enum:
                                        - Cookie
                                        - Header
                                        - Path
                                        - Query
                                value:
                                  type: string
                          hosts:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              pattern: ^\*?[0-9a-zA-Z-._]+$
                          methods:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              enum:
                                - CONNECT
                                - DELETE
                                - GET
                                - HEAD
                                - OPTIONS
                                - PATCH
                                - POST
                                - PUT
                                - TRACE
                          paths:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              pattern: ^/[a-zA-Z0-9\-._~%!$&'()+,;=:@/\*]*\*?$
                          remoteAddrs:
                            type: array
                            minItems: 1
                            items:
                              type: string
                      name:
                        type: string
                        minLength: 1
                      plugin_config_name:
                        type: string
                        minLength: 1
                      plugins:
                        type: array
                        required:
                          - name
                          - enable
                        items:
                          type: object
                          properties:
                            config:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            enable:
                              type: boolean
                            name:
                              type: string
                              minLength: 1
                      priority:
                        type: integer
                      timeout:
                        type: object
                        properties:
                          connect:
                            type: string
                          read:
                            type: string
                          send:
                            type: string
                      websocket:
                        type: boolean
                stream:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    required:
                      - name
                      - match
                      - backend
                      - protocol
                    properties:
                      backend:
                        type: object
                        required:
                          - serviceName
                          - servicePort
                        properties:
                          resolveGranularity:
                            type: string
                            enum:
                              - endpoint
                              - service
                          serviceName:
                            type: string
                            minLength: 1
                          servicePort:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          subset:
                            type: string
                      match:
                        type: object
                        required:
                          - ingressPort
                        properties:
                          ingressPort:
                            type: integer
                            maximum: 65535
                            minimum: 1
                      name:
                        type: string
                        minLength: 1
                      protocol:
                        type: string
                        enum:
                          - TCP
                          - UDP
            status:
              type: object
              properties:
                conditions:
                  type: array
                  items:
                    type: object
                    properties:
                      message:
                        type: string
                      observedGeneration:
                        type: integer
                      reason:
                        type: string
                      status:
                        type: string
                      type:
                        type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Hosts
          type: string
          jsonPath: .spec.http[].match.hosts
        - name: URIs
          type: string
          jsonPath: .spec.http[].match.paths
        - name: Target Service(HTTP)
          type: string
          priority: 1
          jsonPath: .spec.http[].backends[].serviceName
        - name: Ingress Server Port(TCP)
          type: integer
          priority: 1
          jsonPath: .spec.tcp[].match.ingressPort
        - name: Target Service(TCP)
          type: string
          priority: 1
          jsonPath: .spec.tcp[].match.backend.serviceName
        - name: Age
          type: date
          jsonPath: .metadata.creationTimestamp
    - name: v2
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              anyOf:
                - required:
                    - http
                - required:
                    - stream
              properties:
                http:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    anyOf:
                      - required:
                          - name
                          - match
                          - backends
                      - required:
                          - name
                          - match
                          - upstreams
                    properties:
                      authentication:
                        type: object
                        required:
                          - enable
                        properties:
                          enable:
                            type: boolean
                          jwtAuth:
                            type: object
                            properties:
                              cookie:
                                type: string
                              header:
                                type: string
                              query:
                                type: string
                          keyAuth:
                            type: object
                            properties:
                              header:
                                type: string
                          ldapAuth:
                            type: object
                            properties:
                              base_dn:
                                type: string
                              ldap_uri:
                                type: string
                              uid:
                                type: string
                              use_tls:
                                type: boolean
                          type:
                            type: string
                            enum:
                              - basicAuth
                              - keyAuth
                              - jwtAuth
                              - wolfRBAC
                              - hmacAuth
                              - ldapAuth
                      backends:
                        type: array
                        minItems: 1
                        required:
                          - serviceName
                          - servicePort
                        items:
                          type: object
                          properties:
                            resolveGranularity:
                              type: string
                              enum:
                                - endpoint
                                - service
                            serviceName:
                              type: string
                              minLength: 1
                            servicePort:
                              anyOf:
                                - type: integer
                                - type: string
                              x-kubernetes-int-or-string: true
                            subset:
                              type: string
                            weight:
                              type: integer
                              minimum: 0
                      match:
                        type: object
                        required:
                          - paths
                        properties:
                          exprs:
                            type: array
                            minItems: 1
                            items:
                              type: object
                              oneOf:
                                - required:
                                    - subject
                                    - op
                                    - value
                                - required:
                                    - subject
                                    - op
                                    - set
                              properties:
                                op:
                                  type: string
                                  enum:
                                    - Equal
                                    - NotEqual
                                    - GreaterThan
                                    - GreaterThanEqual
                                    - LessThan
                                    - LessThanEqual
                                    - In
                                    - NotIn
                                    - RegexMatch
                                    - RegexNotMatch
                                    - RegexMatchCaseInsensitive
                                    - RegexNotMatchCaseInsensitive
                                set:
                                  type: array
                                  items:
                                    type: string
                                subject:
                                  type: object
                                  required:
                                    - scope
                                  properties:
                                    name:
                                      type: string
                                      minLength: 1
                                    scope:
                                      type: string
                                      enum:
                                        - Cookie
                                        - Header
                                        - Path
                                        - Query
                                        - Variable
                                value:
                                  type: string
                          filter_func:
                            type: string
                          hosts:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              pattern: ^\*?[0-9a-zA-Z-._]+$
                          methods:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              enum:
                                - CONNECT
                                - DELETE
                                - GET
                                - HEAD
                                - OPTIONS
                                - PATCH
                                - POST
                                - PUT
                                - TRACE
                          paths:
                            type: array
                            minItems: 1
                            items:
                              type: string
                              pattern: ^/[a-zA-Z0-9\-._~%!$&'()+,;=:@/\*]*\*?$
                          remoteAddrs:
                            type: array
                            minItems: 1
                            items:
                              type: string
                      name:
                        type: string
                        minLength: 1
                      plugin_config_name:
                        type: string
                        minLength: 1
                      plugins:
                        type: array
                        required:
                          - name
                          - enable
                        items:
                          type: object
                          properties:
                            config:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            enable:
                              type: boolean
                            name:
                              type: string
                              minLength: 1
                            secretRef:
                              type: string
                      priority:
                        type: integer
                      timeout:
                        type: object
                        properties:
                          connect:
                            type: string
                          read:
                            type: string
                          send:
                            type: string
                      upstreams:
                        description: Upstreams refer to ApisixUpstream CRD
                        type: array
                        items:
                          description: >-
                            ApisixRouteUpstreamReference contains a
                            ApisixUpstream CRD reference
                          type: object
                          properties:
                            name:
                              type: string
                            weight:
                              type: integer
                      websocket:
                        type: boolean
                ingressClassName:
                  type: string
                stream:
                  type: array
                  minItems: 1
                  items:
                    type: object
                    required:
                      - name
                      - match
                      - backend
                      - protocol
                    properties:
                      backend:
                        type: object
                        required:
                          - serviceName
                          - servicePort
                        properties:
                          resolveGranularity:
                            type: string
                            enum:
                              - endpoint
                              - service
                          serviceName:
                            type: string
                            minLength: 1
                          servicePort:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          subset:
                            type: string
                      match:
                        type: object
                        required:
                          - ingressPort
                        properties:
                          host:
                            type: string
                          ingressPort:
                            type: integer
                            maximum: 65535
                            minimum: 1
                      name:
                        type: string
                        minLength: 1
                      plugins:
                        type: array
                        required:
                          - name
                          - enable
                        items:
                          type: object
                          properties:
                            config:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            enable:
                              type: boolean
                            name:
                              type: string
                              minLength: 1
                            secretRef:
                              type: string
                      protocol:
                        type: string
                        enum:
                          - TCP
                          - UDP
            status:
              type: object
              properties:
                conditions:
                  type: array
                  items:
                    type: object
                    properties:
                      message:
                        type: string
                      observedGeneration:
                        type: integer
                      reason:
                        type: string
                      status:
                        type: string
                      type:
                        type: string
      subresources:
        status: {}
      additionalPrinterColumns:
        - name: Hosts
          type: string
          jsonPath: .spec.http[].match.hosts
        - name: URIs
          type: string
          jsonPath: .spec.http[].match.paths
        - name: Target Service(HTTP)
          type: string
          priority: 1
          jsonPath: .spec.http[].backends[].serviceName
        - name: Ingress Server Port(TCP)
          type: integer
          priority: 1
          jsonPath: .spec.tcp[].match.ingressPort
        - name: Target Service(TCP)
          type: string
          priority: 1
          jsonPath: .spec.tcp[].match.backend.serviceName
        - name: Age
          type: date
          jsonPath: .metadata.creationTimestamp
  conversion:
    strategy: None
status:
  conditions:
    - type: NamesAccepted
      status: 'True'
      lastTransitionTime: '2024-04-23T05:28:57Z'
      reason: NoConflicts
      message: no conflicts found
    - type: Established
      status: 'True'
      lastTransitionTime: '2024-04-23T05:28:57Z'
      reason: InitialNamesAccepted
      message: the initial names have been accepted
  acceptedNames:
    plural: apisixroutes
    singular: apisixroute
    shortNames:
      - ar
    kind: ApisixRoute
    listKind: ApisixRouteList
  storedVersions:
    - v2